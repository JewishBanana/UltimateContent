package com.github.jewishbanana.ultimatecontent.utils;

import java.lang.reflect.Field;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Base64;
import java.util.UUID;

import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.meta.SkullMeta;

import com.github.jewishbanana.ultimatecontent.Main;
import com.mojang.authlib.GameProfile;
import com.mojang.authlib.properties.Property;

public enum CustomHead {
	
	// ITEMS
	BROKEN_SNOW_GLOBE("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZTBmZDEzYTk2YTgyNDMwNjIxYTY1ZWE5N2U4OTgxOWNhMGI2OGMwMzQyNTMwMjVkYTA0MjhiYmNhZDQzZmQ2MyJ9fX0="),
	SNOW_GLOBE("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMTMyMjlmODUyNTcyNjY4NGZiMDIyN2RhZDc2MjFmMDVmMGI4YjVkNThhODY5M2ZkMGVhMDY4ODM0OWYxZDUzYyJ9fX0="),
	EASTER_BASKET("ewogICJ0aW1lc3RhbXAiIDogMTY4MDgxMDY0MjU0OCwKICAicHJvZmlsZUlkIiA6ICJkMWUzNzFkZDViNjQ0YWRjYTZhN2VkNjRlZjJkYjQwMyIsCiAgInByb2ZpbGVOYW1lIiA6ICJNeGZlZSIsCiAgInNpZ25hdHVyZVJlcXVpcmVkIiA6IHRydWUsCiAgInRleHR1cmVzIiA6IHsKICAgICJTS0lOIiA6IHsKICAgICAgInVybCIgOiAiaHR0cDovL3RleHR1cmVzLm1pbmVjcmFmdC5uZXQvdGV4dHVyZS8yYjE2ZDQwOWFjNWU4NzU3Njk4NjI1OTQzNDY2NmYyOWY4ZDUxOTA3ZTc0Y2MxNDM5OTA3NGI4NDU1Y2Y5ZDM5IiwKICAgICAgIm1ldGFkYXRhIiA6IHsKICAgICAgICAibW9kZWwiIDogInNsaW0iCiAgICAgIH0KICAgIH0KICB9Cn0=",
			"http://textures.minecraft.net/texture/2b16d409ac5e87576986259434666f29f8d51907e74cc14399074b8455cf9d39"),
	TRICK_OR_TREAT_BASKET("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOThhY2JkMTMxNzgyZWY2ZDIyZmU0MTg3YWQ0NjlhMjNmYjc0OGMyNzAyMWQ5NjVhMDEyMWFkNjQ4MWRmNGQzOCJ9fX0="),
	
	// ENTITIES
	VOID_GUARD("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYzUyNzRkZDc3MmExYWJmZDVmZTZlNjNmZGE5ZmEyOWNhNzQ0OWFkZmE2MmM0NWQzOWE3NjhkNjhjNzFiYjYifX19"),
	VOID_GUARD_RAGE("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNDZkODQ0MDg1NDM0NTYyMTI4YTMyNDhhZDQzMDI3ZDE2OTY0Y2UxNTI0YmZhNmRjYzhiMmZiNDk5Y2Y1OTY0ZCJ9fX0="),
	VOID_ARCHER("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvY2ZiZjJlMGE0YjY2ZDA2MTlhZmE4ZjNmNDZhNjQ4M2EzZWNmZjI2NzkxNTEzMjYzNjk3OWM3Njg3MGMxNWFlNiJ9fX0="),
	CHRISTMAS_ELF1("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMWQ4MmY5YzM2ZTgyNGMxZTM3OTYzYTg0OWJmNWFiZDc2ZDNiMzQ5MTI1MDIzNTA0YWY1ODM2OTA4NjA4OWVlOSJ9fX0="),
	CHRISTMAS_ELF2("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNGVjNTQ1NWY0MzQyNmNhMTg3NGI1YzdiNGE0OTJlYzM3MjJhNTAyZjhiOTU5OWU3NThlMTMzZmVkOGIzYzFlNCJ9fX0="),
	GRINCH("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZTgzOGQ2MzBkNDk2ZjIxMjg1ZDQ5MDk5YzNmZDhkOTIxNDQyMTcyYTUxNjBjMWI1ZDQyYTUwODBmOWNmODE4YSJ9fX0="),
	SANTA("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvN2Q2YjMyYTk0MTJmYzEyYmY0NThmMTQzNjhiMTk2OWMwYmM5MTNkMzAyN2ZiNjZlMTFhNGJhZjI4Mzk4YWQifX19"),
	WHITE_GIFT("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZTQ3YjM3ZTY3YTg5MTU5YmY0YWNjNGE0NGQ0MzI4ZjRlZmMwMTgxNjA1MTQyMjg4ZTVlZWQxYWI4YWVkOTEzYyJ9fX0="),
	GREEN_GIFT("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMjhkYzNjODQ0OTFjNGZmMTAzZGU2ZWEwMTg4MGUyZDgzNDMyY2Q0ODc4Yjg0ZDZiNDMyNTNjYzUxZmQ5NzhlNyJ9fX0="),
	BLUE_GIFT("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNWI4NWUyOWYyOWVjOWE5MGU0ODJlYTViODM5MWJjYjQ1NjBiYmFlMGRjZDE1ZDdjZTFkODYwMTZiNDM1NmU5OCJ9fX0="),
	PURPLE_GIFT("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZTllMzlkOTFjMDRjMzBjYzFmNTMwZmVlNzk4ZWVkMjc5ZGRlNjBmOTVjMmUxZDE1NWMwZmRkMzYxZDA5NjJlZCJ9fX0="),
	YELLOW_GIFT("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWJkOTg3OTJkZDkyZDk3MTk4OTQzNDFhYzkwMTJhNTg0YzQ0Mjg1NThmZDJjNzEyZjc4ZTVmMGQ0ZGE4NTQ3MCJ9fX0="),
	ANCIENT_SKELETON("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNzFkZDdlZTdkYzdmYmNiNWMxYWVlN2EyNTc5MTdmMDM0ZWViYTFlMDkzNzI3ZDcxMmRhYjBmYzM1ZmIwZTM4In19fQ=="),
	MUMMY("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMTllNjk1MThjYzFhMzM0NGI2OTc3M2EwOWEyMzdjNjYzODFiODUyNzkxN2Y0YTM4NTBlZThhY2Y0ZWY0MjAzYiJ9fX0="),
	SHADOW_LEECH("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOWY4ZDYwZWU5YTI0YmE4YjBkMDVlMjVlOGY3NWFiYTU5MGQ1MjU1ZjA0NGU3ZjVhNDhjNTMwYjc5MzIyNGEyYyJ9fX0="),
	BLOODY_LEECH("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMjRhY2E4OWVlYmE1NGVkOTg1OGE5N2I5OTU4NWEzZDNiODNjNGZjMzU0MTA4OTQ4ZTFkYTE1YzdlNDc0MTBhIn19fQ=="),
	SKELETON_KNIGHT("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNTNlMzJhNmM0MTQ3ZGY0MGQwMjM4NTQ2ZDM2ZDVjMWVlYWZjMmVhOWNlYWMwMzUzZmNiODNiMGVlYTJkMmNmMSJ9fX0="),
	ZOMBIE_KNIGHT("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMWNjMzcwMjdlNTZmYWJkZDA0YmQzNTc0ZmUwZjQxM2JjMTY1Y2RmOWY4ZGY5NmFiZjdmYzA1M2E3ZDJlOTZjYiJ9fX0="),
	SWAMP_BEAST("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNWMyM2ZkNzBkMGVhZmY1MjQ2MWYwNzA4YzYxNmFhNjcxYjQ5NTg2NTk3MjI5N2I1NjY4OTA4ODMxOGY0MjU4ZSJ9fX0="),
	YETI("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOThjNjk5ZTNhOGI0MGM2MWQ0YTM1OTA0MDRhZTliYTUyNjJhYjRhMzVkODQyZjI3MWFmNDEzZDdmNGQyMGY1YSJ9fX0="),
	CURSED_DIVER("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNzZmNzkzMGUzOWY3NTRjNzYwZGY5MDdmNmJiNjE3NWI1ZjQyNDljZTk3YTk3ZmQzZDAzMmVjNWZiY2VhNjQ2MSJ9fX0="),
	LOST_SOUL1("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZWM0ZDIxOTk2ZjcwYjU0NWZiYTdkZjM2YTkyNzg5MWNiZDJmNTcwYmM3Y2IzY2E5ZGU1MTcxOGE4NGMwYTU2ZSJ9fX0="),
	LOST_SOUL2("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODliYjRiNDI1NTRjODlkMTdkYjFmZDdkMTkyNmM4OWNlOWFhYjNmM2EzMTMyM2Y3ODQ5NDI5YzJlMDQ4YWU3YyJ9fX0="),
	LOST_SOUL3("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYTFhYjRjZGFmNWIzNGZmZjEzODdjOWE2MzA4NzYyMTU4MmZlNzNiZGEyYTgzNmI2OGM1Y2ZmYzlhYTRmYzMifX19"),
	LOST_SOUL4("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMmFiYmUzZGZjY2ViYWIyNDk1OTk0ZGY4MzVhYmZiMjk2YmUwNDE4ZDJmNjIyODUwYmRlMTRjOWU4MjQyMmYxYyJ9fX0="),
	SOUL_REAPER("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYTVjMmVmYTQyMTgzMDAwODA2MjkwNjI4NGYwMzNmOTA1ZGVkNGVhMmM3ZWQ5YjZlMDk3YWMxZGUyNDI3ZTcwOCJ9fX0="),
	INFESTED_SKELETON("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZjU1MjU4OTNmZWI2MTM5YWI1Yjc3MjRjNjk5YzAyZGM2Y2U3ZGQxY2EyNDRmMWMwZWYzZGMxMjZlODc1Y2FkNSJ9fX0="),
	INFESTED_ZOMBIE("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvY2JmOGM1NzJhNzM3ZDgyNzVlM2MzOGFiY2ZlYmRiMTI1YmUzYjkwZmMxZTVlNzllNmVkZDU0OTlhYTYyYmVkNiJ9fX0="),
	INFESTED_CREEPER("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZWJmZDE5ODRjN2U0OGQxN2U0OGZlZDQxODY0ZGQ0NTkxYzU0NWYyMmRkYzMzYjVkNDYwOTVmMGE1MmM2YjRjMyJ9fX0="),
	INFESTED_ENDERMAN("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODU0YTY0ZmE0NzI3NGNhZTg1YjljMGI4Y2Q3YjYxNzJiNGFiZjFkMTJhM2Y2ZDY0MzBhZDIwY2IzOGQ2Yzk0NyJ9fX0"),
	INFESTED_SPIRIT1("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYTczNmRjZmNhZDM2OWZjZDY3NjI1MDZiYTMzODQwYzljOGJmOTA1MjNkMjMwOWZhNmZmM2M1YWU3ODJkOGU4ZiJ9fX0="),
	INFESTED_SPIRIT2("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWYzZTFhOTBmZGQ2ZjYxMzRiZDI1MGE3YmM5OTgxZjk0NWZkZDIwNDZiMTcxNzMyZDMwMWVjZDM5OGM2NTZiZCJ9fX0="),
	INFESTED_TRIBESMAN1("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMmJlNTRiNzY4ZjRmNWVlMDljMDViZGE1NzFkNDkwZmZmMmNiZDQ0MDMyYWI0YWU4YWE2NTcwOTk4Mzk3MDYzMSJ9fX0="),
	INFESTED_TRIBESMAN2("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNjhlNzM3NjM4MjRkOGMxOWNiNzE5MmUyYTZmMWM2MmY5YmJkMDI4YzZkNGViOTZlNTU0YTQ3YzYxMjUwMzhmMCJ9fX0="),
	INFESTED_DEVOURER("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNThhYzhkMTExYzI2OWJiN2VmYzZiNTY2MGI2ZDM3OWQ4MGQxZThhZDNmOTNjNGEwZWJhNWNjZWRjMWU3M2NiZSJ9fX0="),
	INFESTED_ALPHA_DEVOURER("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvM2E0MGNmOTQwNjliNTlhYWY3YzgxM2U0YTJlOGI3MTFhODVkZTdkYzkzMmRhMDMzYmUyZTQ0ZTNkYzY5ODYxMyJ9fX0="),
	INFESTED_HOWLER("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMzg2OTU2NWIzMDhjODJkMzYyNjlhNzIzMTFmYWQ3NGEzZmYwNDk0ODIwZDhlMThkODU2ZmViOTVjOThmMjg3MiJ9fX0="),
	INFESTED_HOWLER_EYES("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMWI0ODU5ZGIyOGYwYjdmYjllYWMwZDUzOGJjNGY1NTUzMDU0NmJlNGFlZTFjMDhlYTdlYzMzYzQ1ZTIyMjM3MyJ9fX0="),
	INFESTED_WORM_BODY("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNTlmOTRkMWY3ZTVmM2NhNWZiMmYyMmZlYzQ4N2QzOTI1NTdmODRiNWNkNThhYWU1MzRhMGUyN2YxNDZkZTYxIn19fQ=="),
	GHOUL("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMjc4YTJlYmI3MThlZjdhODM3NjNkZWY0ZDkzMjI0ZjU0MDc2NDUwM2FhODYxNTQ1NjU4MDZhZjFiYWI0NTFkMCJ9fX0="),
	SCARECROW("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNWZlNjUwMmFjNGM4NDdiMWFjMzc4MTBkNjZkMjhjOTFhOGIxOGZkN2Y2MzgzMTI4MjI4NzU1YWE4YzhmNSJ9fX0="),
	STALKER("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZTNjYjE5MjQxNjQ4NTEwYmNjMTVjMTgwMjhiYjM1YTQ0ZWE2MDQ5ODhmMmFhOTQ1MmMzZmM2MmVkNWZkYzAxOSJ9fX0="),
	BLOODY_ZOMBIE("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZDY5ZGIxODc2ODJkYTM3MDdhM2RiYzBhYzAzZGUxOGY2NzUyZDczODk5MjQ3NjEyMzZjM2I4NzBlYjkyMWM3OSJ9fX0="),
	ROTTEN_ZOMBIE("eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMzZhYWU4NmRhMGNkMzE3YTQ3ZmE2NjY4ZmQ0Nzg1YjVhN2E3ZTRlZDllN2JjNjg2NTJiYWUyNzk4NGI4NGMifX19");
	
	private String base,url;
	private ItemStack head;
	
	private CustomHead(String base) {
		this.base = base;
	}
	private CustomHead(String base, String url) {
		this.base = base;
		this.url = url;
	}
	public static void init(Main plugin) {
		for (CustomHead type : values()) {
			if (VersionUtils.isMCVersionOrAbove("1.18.1")) {
				org.bukkit.profile.PlayerProfile profile = Bukkit.createPlayerProfile(UUID.fromString("545ff361-b6e6-4531-9c4c-398ef5589a8a"));
				org.bukkit.profile.PlayerTextures textures = profile.getTextures();
				try {
					if (type.url != null)
						textures.setSkin(new URL(type.url));
					else
						textures.setSkin(getUrlFromBase64(type.base));
					profile.setTextures(textures);
				} catch (Exception e) {
					e.printStackTrace();
					Utils.sendErrorMessage();
				}
				type.head = new ItemStack(Material.PLAYER_HEAD);
				SkullMeta meta = (SkullMeta) type.head.getItemMeta();
				meta.setOwnerProfile(profile);
				type.head.setItemMeta(meta);
			} else {
				type.head = new ItemStack(Material.PLAYER_HEAD);
				SkullMeta meta = (SkullMeta) type.head.getItemMeta();
				try {
					GameProfile profile = new GameProfile(UUID.fromString("545ff361-b6e6-4531-9c4c-398ef5589a8a"), "null");
					profile.getProperties().put("textures", new Property("textures", type.base));
					
					Field field = meta.getClass().getDeclaredField("profile");
					field.setAccessible(true);
					field.set(meta, profile);
				} catch (Exception e) {
					e.printStackTrace();
					Utils.sendErrorMessage();
				}
				type.head.setItemMeta(meta);
			}
		}
	}
	public ItemStack getHead() {
		return head.clone();
	}
	private static URL getUrlFromBase64(String base64) throws MalformedURLException {
	    String decoded = new String(Base64.getDecoder().decode(base64));
	    return new URL(decoded.substring("{\"textures\":{\"SKIN\":{\"url\":\"".length(), decoded.length() - "\"}}}".length()));
	}
}
